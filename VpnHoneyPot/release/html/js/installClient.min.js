function loadXML(){$.ajax({type:"get",url:"/por/ec_pkg.csp?platform=all&id="+Math.floor(1e3*Math.random()),dataType:"xml",success:function(a){var b=a,c=xmlToJSON.parseXML(b);"object"==typeof c.root.linux.deb.x86.info.link||"0"===c.root.linux.deb.x86.info.custom?g_install_device.linux.link.deb_x86=baseLink+c.root.linux.deb.x86.alias+"/EasyConnect_x86.deb":g_install_device.linux.link.deb_x86=c.root.linux.deb.x86.info.link,"object"==typeof c.root.linux.deb.x64.info.link||"0"===c.root.linux.deb.x64.info.custom?g_install_device.linux.link.deb_x64=baseLink+c.root.linux.deb.x64.alias+"/EasyConnect_x64.deb":g_install_device.linux.link.deb_x64=c.root.linux.deb.x64.info.link,"object"==typeof c.root.linux.rpm.x86.info.link||"0"===c.root.linux.rpm.x86.info.custom?g_install_device.linux.link.rpm_x86=baseLink+c.root.linux.rpm.x86.alias+"/EasyConnect_x86.rpm":g_install_device.linux.link.rpm_x86=c.root.linux.rpm.x86.info.link,"object"==typeof c.root.linux.rpm.x64.info.link||"0"===c.root.linux.rpm.x64.info.custom?g_install_device.linux.link.rpm_x64=baseLink+c.root.linux.rpm.x64.alias+"/EasyConnect_x64.rpm":g_install_device.linux.link.rpm_x64=c.root.linux.rpm.x64.info.link,"object"==typeof c.root.mac.info.link||"0"===c.root.mac.info.custom?g_install_device.mac.link=baseLink+c.root.mac.alias+"/EasyConnect.dmg":g_install_device.mac.link=c.root.mac.info.link,initPath()},error:function(a,b,c){initPath()}})}function osDetect(){var a=navigator.userAgent.toLowerCase(),b=navigator.platform.toLowerCase(),c=!!a.match(/(windows)/i)||"windows"===b,d=!!b.match(/(macintosh|mac68k|macppc|macintel)/i),e=!!b.match(/(iphone|ipod|ipad)/i)||!!a.match(/(iphone|ipod|ipad|like mac os x)/i),f=!!a.match(/(android)/i),g=!!b.match(/(linux|x11)/i)||!!a.match(/(linux|x11)/i),h=a.match(/(ubuntu)/i)?"deb":"rpm",i=a.match(/(x86_64|x86-64|x64|amdx64)/i)?"x64":"x86",j={windows:c,mac:d,ios:e,android:f,linux:{isLinux:g,version:h,bits:i}};return function(){for(var a in j){if(j[a].isLinux)return[a,j[a]];if(j[a])return[a,{}]}return["windows",{}]}()}function initPath(){$("#deb_x86").attr("href",g_install_device.linux.link.deb_x86),$("#deb_x64").attr("href",g_install_device.linux.link.deb_x64),$("#rpm_x86").attr("href",g_install_device.linux.link.rpm_x86),$("#rpm_x64").attr("href",g_install_device.linux.link.rpm_x64),$("#macLink").attr("href",g_install_device.mac.link)}function update(a){var b=$("#"+a),c=$(".main").width(),d=$(".deviceBtn").width(),e=(b.index()-1)*c*-1,f=(b.index()-1)*d;$(".ulbox").animate({left:e},400),$("#navAnim").animate({left:f},400),b.siblings().filter(function(){$(this).removeClass($(this).attr("id")+"ActiveBtn"),$(this).removeClass("activeBtn clickedBtn")}),b.addClass("activeBtn clickedBtn"),b.addClass(a+"ActiveBtn")}function initEvent(){loadXML(),update(osDetect()[0]);var a=$(".deviceBtn");a.click(function(){update($(this).attr("id"))}),a.hover(function(){$(this).hasClass("clickedBtn")||($(this).addClass($(this).attr("id")+"ActiveBtn"),$(this).addClass("activeBtn"),$(this).siblings("li").filter(function(){$(this).removeClass($(this).attr("id")+"ActiveBtn"),$(this).removeClass("activeBtn")}))},function(){$(this).parent().children().removeClass("activeBtn"),$(this).parent().children().filter(function(){$(this).removeClass($(this).attr("id")+"ActiveBtn")});var a=$(".clickedBtn");a.addClass("activeBtn"),a.addClass(a.attr("id")+"ActiveBtn")})}function checkEcAgentInstall(){initEcAgent({success:function(a){var b=a.result;"-2"===b||"-3"===b?checkEcAgentInstallLater():location.href="/"},error:function(){checkEcAgentInstallLater()}})}function checkEcAgentInstallLater(){setTimeout(function(){checkEcAgentInstall()},6e3)}var baseLink="http://download.sangfor.com.cn/download/product/sslvpn/pkg/",g_install_device={mac:{link:baseLink+"mac_01/EasyConnect.dmg"},linux:{link:{deb_x86:baseLink+"linux_01/EasyConnect_x86.deb",deb_x64:baseLink+"linux_01/EasyConnect_x64.deb",rpm_x86:baseLink+"linux_01/EasyConnect_x86.rpm",rpm_x64:baseLink+"linux_01/EasyConnect_x64.rpm"}}};$(function(){initEvent()});